<div class="add-site">

  <div class="add-new-site-wrapper">
  
    <h3>Add new site to track events</h3>
  
    <form appAuthFormDisplay [formGroup]="profileForm" (ngSubmit)="onAddNewSite()">
  
      <div appFormItem class='form-item'>
        <label for="name">Enter path to the site</label>
        <input id="name" type="text" formControlName="name">
      </div>
      
      <div appFormItem class='form-error'>
        <div></div>
        <div class='form-error-placeholder' *ngIf='!f.name.touched'>
          path to the site
        </div>
        <div class='form-error-correct-placeholder' *ngIf='!f.name.errors && f.name.touched'>
          Site conditions are fulfilled
        </div>
        <div *ngIf='f.name.errors && f.name.touched'>
          <div *ngIf='f.name.errors?.required'>
            Email is required
          </div>
          <div *ngIf='f.name.errors?.pattern'>
            Email must be valid
          </div>
        </div>
      </div>

      <div appFormItem class="select-events">
        <span><b>Choose events to listen for</b></span>
        <select name="site-select" id="" (change)='onSelectEvent($event)' formControlName='choosedEvents'>
          <option disabled value='default'>select event</option>
          <option *ngFor='let event of mockEventList' value={{event}}>{{event}}</option>
        </select>
      </div>
      
      <div class="event-list" *ngIf='eventList.length !== 0'>
        <span><b>Choosed events: </b></span>
        <span *ngFor='let event of eventList; let idx = index'>
          {{event}}
          <span *ngIf='idx !== eventList.length - 1'> ,</span>
        </span>
      </div>

      <button appBtnDirective type="submit" [disabled]="!profileForm.valid">Add</button>
    </form>
    
  </div>

  <div class = 'sites'>
    
    <h3>Sites you are already tracking</h3>
    
    <div class='' *ngIf='sites && sites.length === 0'>
      <h4>Start with adding your first site for listening </h4>
    </div>

    <ul *ngFor="let site of sites; let idx = index">

      <li>
        <span (click)='openModal($event, idx)'>{{site.address}}</span>
        <span class='close-icon' (click)='onDeleteClick(site)'>&#x2715;</span>
      </li>
      
    </ul>
    <app-modal 
      *ngIf="checkedSite && +checkedSite > -1"
      [Data]="sites[checkedSite]"
      (onClose)="closeModal($event)"
      (onApply)="applyChanges($event)">
    </app-modal>
  </div>
</div>